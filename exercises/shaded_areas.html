<!DOCTYPE html>
<html data-require="math math-format graphie word-problems">
    <head>
        <title>Shaded areas</title>
        <script src="../khan-exercise.js"></script>
        <script type="text/javascript">
            function getShape(name, size) {
                if (name === "square") {
                    var s = size / 2;
                    var v = [[-s, s], [s, s], [s, -s], [-s, -s], true];

                    return {
                        vertices: _.initial(v),
                        description: "a square with length " + size,
                        hint: "\\text{area of a square} = length^2 = "+ size +"^2",
                        contains: function(point) {
                            return (point[0] >= -s) && (point[0] <= s) &&
                                   (point[1] >= -s) && (point[1] <= s);
                        },
                        drawShape: function(g, style) {
                            return g.path(v, style);
                        },
                        drawSize: function(g, style, inner) {
                            return {
                                label: inner ?
                                    g.label([0, -s], size, "above", style) :
                                    g.label([s, 0], size, "right", style),
                                path: inner ?
                                    g.path([[-s, -s], [s, -s]], style) :
                                    g.path([[ s,  s], [s, -s]], style)
                            };
                        }
                    }
                } else if (name === "circle") {
                    var r = Math.floor(size / 2);
                    return {
                        vertices: _.map([0, 30, 45, 60, 90, 120, 135, 150, 180,
                                         210, 225, 240, 270, 300, 315, 330, 360],
                                        function(th) {
                                            th = th * Math.PI / 180;
                                            return [r * Math.cos(th), r * Math.sin(th)];
                                        }),
                        description: "a circle with radius " + r,
                        hint: "\\text{area of a circle} = \\pi r^2 = \\pi " + r + "^2",
                        contains: function(point) {
                            return (pow(point[0], 2) + pow(point[1], 2) <= r*r);
                        },
                        drawShape: function(g, style) {
                            return g.circle([0, 0], r, style);
                        },
                        drawSize: function(g, style, inner) {
                            return {
                                label: g.label(inner ? [-r/2, -1] : [r-1, -1], r, "above", style),
                                path: g.path([[0, 0], inner ? [-r, 0] : [r, 0]], r, style)
                            };
                        }
                    };
                } else {
                    var s = 2*size,
                    v = [[x, y], [x + s, y], [x + s/2, y + sqrt(3)*s/2]],
                    centroid = [(v[0][0] + v[1][0] + v[2][0]) / 3,
                                (v[0][1] + v[1][1] + v[2][1]) / 3];

                    // recenter the triangle
                    v = _.map(v, function(vertex) {
                        return [vertex[0] - centroid[0], vertex[1] - centroid[1]];
                    });
                    v.push(true);

                    var sign = function(p1, p2, p3) {
                        return (p1[0] - p3[0]) * (p2[1] - p3[1]) - (p2[0] - p3[0]) * (p1[1] - p3[1]);
                    };

                    return {
                        description: "an equilateral with side length " + size,
                        vertices: _.initial(v),
                        hint: "\\text{area of an equilateral triangle} = \\dfrac{\\sqrt{3}}{4}s^2 = \\dfrac{\\sqrt{3}}{4}"+s+"^2",
                        contains: function(point) {
                            var b1, b2, b3;

                            b1 = sign(point, v[0], v[1]) <= 0;
                            b2 = sign(point, v[1], v[2]) <= 0;
                            b3 = sign(point, v[3], v[0]) <= 0;

                            return ((b1 == b2) && (b2 == b3));
                        },
                        drawShape: function(g, style) {
                            return g.path(v, style);
                        },
                        drawSize: function(g, style, inner) {
                            return {
                                label: g.label([(v[0][0] + v[1][0]) / 2, (v[0][1] + v[1][1]) / 2], s, "below", style),
                                path: g.path([v[0], v[1]], s, style)
                            };
                        }
                    };
                }
            };
        </script>
    </head>
    <body>
        <div class="exercise">
            <div class="vars">
                <var id="OUTER_SIZE">randRange(6, 16)</var>
                <var id="INNER_SIZE">randRange(4, OUTER_SIZE - 1)</var>
                <var id="CANVAS_SIZE">OUTER_SIZE/2 + 2</var>

                <var id="AREAS">{
                    "square": function(size) {
                        return [Math.pow(size * 2, 2), Math.pow(size * 2, 2)];
                    },
                    "circle": function(size) {
                        return [Math.PI * size * size, piFraction(Math.PI * size * size)];
                    },
                    "equilateral triangle": function(size) {
                        return [size*size * Math.sqrt(3), size*size + "\\sqrt{3}"];
                    }
                }</var>

            </div>

            <div class="problems">
                <div id="square-square" data-weight="1">
                    <div class="vars">
                        <var id="OUTER">getShape("square", OUTER_SIZE)</var>
                        <var id="INNER">getShape("square", INNER_SIZE)</var>
                        <var id="PRETTY_OUTER_AREA">OUTER_SIZE * OUTER_SIZE</var>
                        <var id="PRETTY_INNER_AREA">INNER_SIZE * INNER_SIZE</var>
                        <var id="SHADED_AREA">PRETTY_OUTER_AREA - PRETTY_INNER_AREA</var>
                    </div>

                    <div class="problem">The diagram shows <var>INNER.description</var> inside <var>OUTER.description</var>.</div>
                    <div class="question">What is the area of the shaded region?</div>
                    <div class="solution" data-type="number"><var>SHADED_AREA</var></div>
                    <div class="graphie" id="shapes">
                        var g = init({
                            range: [[-CANVAS_SIZE, CANVAS_SIZE], [-CANVAS_SIZE, CANVAS_SIZE]],
                            scale: [200 / CANVAS_SIZE, 200 / CANVAS_SIZE]
                        });

                        graph.outerShape = OUTER.drawShape(g, { fill: BLUE, stroke: BLUE, "fill-opacity": 0.5 });
                        graph.innerShape = INNER.drawShape(g, { fill: "#f8f8f8", stroke: BLUE });
                        graph.outerSize = OUTER.drawSize(g, { stroke: BLUE, opacity: 1 });
                        graph.innerSize = INNER.drawSize(g, { stroke: ORANGE, opacity: 1 }, true);
                    </div>
                </div>

                <div id="circle-not-triangle" data-weight="2">
                    <div class="vars">
                        <div data-ensure="INNER_SHAPE === 'circle' || OUTER_SHAPE === 'circle'">
                            <var id="OUTER_SHAPE">randFromArray(["circle", "square"])</var>
                            <var id="INNER_SHAPE">randFromArray(["circle", "square"])</var>
                        </div>
                        <var id="OUTER">getShape(OUTER_SHAPE, OUTER_SIZE)</var>
                        <var id="INNER">getShape(INNER_SHAPE, INNER_SIZE)</var>
                        <var id="PRETTY_INNER_AREA">INNER_SIZE * INNER_SIZE</var>
                        <var id="PRETTY_OUTER_AREA">OUTER_SIZE * OUTER_SIZE</var>
                        <var id="SHADED_AREA">PRETTY_OUTER_AREA - PRETTY_INNER_AREA</var>
                    </div>

                    <div class="problem">The diagram shows <var>INNER.description</var> inside <var>OUTER.description</var>.</div>
                    <div class="question">What is the area of the shaded region?</div>
                    <div class="solution" data-type="number"><var>SHADED_AREA</var></div>
                    <div class="graphie" id="shapes">
                        var g = init({ range: [[-14, 14], [-14, 14]], scale: [11, 11] });

                        graph.outerShape = OUTER.drawShape(g, { fill: BLUE, stroke: BLUE, "fill-opacity": 0.5 });
                        graph.innerShape = INNER.drawShape(g, { fill: "#f8f8f8", stroke: BLUE });
                        graph.outerSize = OUTER.drawSize(g, { stroke: BLUE, opacity: 1 });
                        graph.innerSize = INNER.drawSize(g, { stroke: ORANGE, opacity: 1 }, true);
                    </div>
                </div>
            </div>

            <div class="hints">
                <div>
                    <p>First, calculate the area of the <span class="hint_blue">whole figure</span> (including the unshaded area), along with the area of the unshaded inner region.</p>
                    <div class="graphie" data-update="shapes">
                        OUTER.drawShape(KhanUtil.currentGraph, { fill: BLUE, opacity: 0.5 });
                    </div>
                </div>
                <p><code>\text{area of whole figure} = </code><br><code>\qquad<var>OUTER.hint</var> = <var>PRETTY_OUTER_AREA</var></code></p>
                <p><code>\text{area of inner region} = </code><br><code>\qquad<var>INNER.hint</var> = <var>PRETTY_INNER_AREA</var></code></p>
                <p>Subtract the area of the inner region from the area of the whole figure to find the area of the shaded region.</p>
                <p><code>\text{area of shaded region} = <var>PRETTY_OUTER_AREA</var> - <var>PRETTY_INNER_AREA</var> = <var>roundTo(2, SHADED_AREA)</var></code></p>
            </div>
        </div>
    </body>
</html>
